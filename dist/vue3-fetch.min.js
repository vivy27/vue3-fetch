var Vue3Fetch=function(e,r){"use strict";function t(e,r,t,n,o,i,c){try{var u=e[i](c),a=u.value}catch(e){return void t(e)}u.done?r(a):Promise.resolve(a).then(n,o)}function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){n(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function c(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],n=!0,o=!1,i=void 0;try{for(var c,u=e[Symbol.iterator]();!(n=(c=u.next()).done)&&(t.push(c.value),!r||t.length!==r);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return t}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return u(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return u(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function a(e){var n=e.url,o=e.method,c=e.query,u=e.body,a=e.headers,s=e.referrer,l=e.referrerPolicy,f=e.mode,d=e.credentials,y=e.cache,p=e.redirect,g=e.integrity,v=e.keepAlive,b=e.signal,h=e.stub,m=r.ref(!1),O=r.ref(!1),S=r.ref(!1),w=r.reactive({data:null,error:null}),j=function(e){var r=new URLSearchParams(e).toString();return r?"".concat(n,"?").concat(r):n},P=i(i(i(i(i(i(i(i(i(i(i({method:o},u&&{body:u}),a&&{headers:a}),s&&{referrer:s}),l&&{referrerPolicy:l}),f&&{mode:f}),d&&{credentials:d}),y&&{cache:y}),p&&{redirect:p}),g&&{integrity:g}),v&&{keepAlive:v}),b&&{signal:b}),A=function(){var e,r=(e=regeneratorRuntime.mark((function e(){var r,t,n,o,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>0&&void 0!==c[0]?c[0]:{},t=r.query,n=r.body,O.value=null,S.value=null,m.value=!0,o=i(i({},P),n&&{body:JSON.stringify(n)}),e.prev=5,e.t0=h,e.t0){e.next=11;break}return e.next=10,fetch(j(t),o).then((function(e){return e.json()}));case 10:e.t0=e.sent;case 11:w.data=e.t0,O.value=!0,S.value=!1,e.next=21;break;case 16:e.prev=16,e.t1=e.catch(5),w.error=e.t1.message,O.value=!1,S.value=!0;case 21:return e.prev=21,m.value=!1,e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[5,16,21,24]])})),function(){var r=this,n=arguments;return new Promise((function(o,i){var c=e.apply(r,n);function u(e){t(c,o,i,u,a,"next",e)}function a(e){t(c,o,i,u,a,"throw",e)}u(void 0)}))});return function(){return r.apply(this,arguments)}}();return r.onMounted((function(){"get"===o&&A({query:c,body:u})})),{isLoading:m,isSuccess:O,isError:S,response:w,execute:A}}var s={name:"vue3-fetch",props:{fetchId:String,url:{type:String,required:!0},method:{type:String,validator:function(e){return["get","post","put","delete"].includes(e)},default:"get"},query:{type:Object,default:function(){return{}}},body:{type:[Object,Array]},headers:{type:Object,default:function(){return{"Content-Type":"application/json"}}},referrer:String,referrerPolicy:{type:String,validator:function(e){return["no-referrer","no-referrer-when-downgrade","origin","origin-when-cross-origin","same-origin","strict-origin","strict-origin-when-cross-origin","unsafe-url"].includes(e)}},mode:{type:String,validator:function(e){return["cors","same-origin","no-cors"].includes(e)}},credentials:{type:String,validator:function(e){return["same-origin","omit","include"].includes(e)}},cache:{type:String,validator:function(e){return["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(e)}},redirect:{type:String,validator:function(e){return["follow","manual","error"].includes(e)}},integrity:String,keepAlive:Boolean,signal:[String,Number,Boolean,Array,Object,Function,Promise],stub:[Array,Object]},setup:function(e,t){var n=t.emit,o=a(i({},e)),u=o.isLoading,s=o.isSuccess,l=o.isError,f=o.response,d=o.execute;return r.watch([s,l],(function(e){var r=c(e,2),t=r[0],o=r[1];t&&n("fetch-success",f.data),o&&n("fetch-error",f.error)})),r.watch((function(){return[e.query,e.body]}),(function(e){var r=c(e,2),t=r[0],n=r[1];d(i(i({},t&&{query:t}),n&&{body:n}))})),{isLoading:u,isSuccess:s,isError:l,response:f,execute:d}}};s.render=function(e,t,n,o,i,c){return r.openBlock(),r.createBlock("div",{id:n.fetchId,class:["vue-fetch",{"is-stubbed":!!n.stub}]},[r.renderSlot(e.$slots,"default",{isLoading:o.isLoading,isSuccess:o.isSuccess,isError:o.isError,data:o.response.data,error:o.response.error})],10,["id"])};var l=Object.freeze({__proto__:null,Vue3Fetch:s}),f=function(e){f.installed||(f.installed=!0,Object.entries(l).forEach((function(r){var t=c(r,2),n=t[0],o=t[1];e.component(n,o)})))},d={install:f},y=null;return"undefined"!=typeof window?y=window.Vue:"undefined"!=typeof global&&(y=global.Vue),y&&y.use(d),e.Vue3Fetch=s,e.default=d,e}({},Vue);