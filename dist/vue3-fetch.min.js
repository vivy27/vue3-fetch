var Vue3Fetch=function(e,r){"use strict";function t(e,r,t,n,i,o,c){try{var u=e[o](c),a=u.value}catch(e){return void t(e)}u.done?r(a):Promise.resolve(a).then(n,i)}function n(e){return function(){var r=this,n=arguments;return new Promise((function(i,o){var c=e.apply(r,n);function u(e){t(c,i,o,u,a,"next",e)}function a(e){t(c,i,o,u,a,"throw",e)}u(void 0)}))}}function i(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){i(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function u(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],n=!0,i=!1,o=void 0;try{for(var c,u=e[Symbol.iterator]();!(n=(c=u.next()).done)&&(t.push(c.value),!r||t.length!==r);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return t}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return a(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return a(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var s={name:"vue3-fetch",props:{fetchId:String,url:{type:String,required:!0},params:{type:Object,default:function(){}},method:{type:String,validator:function(e){return["get","post","put","delete"].includes(e)},default:"get"},headers:Object,payload:Object,referrer:String,referrerPolicy:{type:String,validator:function(e){return["no-referrer","no-referrer-when-downgrade","origin","origin-when-cross-origin","same-origin","strict-origin","strict-origin-when-cross-origin","unsafe-url"].includes(e)}},mode:{type:String,validator:function(e){return["cors","same-origin","no-cors"].includes(e)}},credentials:{type:String,validator:function(e){return["same-origin","omit","include"].includes(e)}},cache:{type:String,validator:function(e){return["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(e)}},redirect:{type:String,validator:function(e){return["follow","manual","error"].includes(e)}},integrity:String,keepAlive:Boolean,signal:[String,Number,Boolean,Array,Object,Function,Promise],stub:[Array,Object]},setup:function(e,t){var i=e.fetchId,o=e.url,a=e.params,s=e.method,l=e.headers,f=e.payload,d=e.referrer,p=e.referrerPolicy,g=e.mode,y=e.credentials,h=e.cache,v=e.redirect,b=e.integrity,m=e.keepAlive,O=e.signal,j=e.stub,w=t.emit,S=c(c(c(c(c(c(c(c(c(c(c({method:s},l&&{headers:l}),f&&{body:f}),d&&{referrer:d}),p&&{referrerPolicy:p}),g&&{mode:g}),y&&{credentials:y}),h&&{cache:h}),v&&{redirect:v}),b&&{integrity:b}),m&&{keepAlive:m}),O&&{signal:O}),P=a&&Object.keys(a).map((function(e){return e+"="+a[e]})).join("&"),k=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.ref(!1),c=r.ref(!1),u=r.ref(!1),a=r.ref(null),s=r.ref(null),l=function(){return Object.keys(i).length>0},f=function(){var r=n(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o.value=!0,r.prev=1,!l()){r.next=6;break}r.t0=i,r.next=9;break;case 6:return r.next=8,fetch(e,t).then((function(e){return e.json()}));case 8:r.t0=r.sent;case 9:a.value=r.t0,c.value=!0,u.value=!1,r.next=19;break;case 14:r.prev=14,r.t1=r.catch(1),s.value=r.t1,c.value=!1,u.value=!0;case 19:return r.prev=19,o.value=!1,r.finish(19);case 22:case"end":return r.stop()}}),r,null,[[1,14,19,22]])})));return function(){return r.apply(this,arguments)}}();return r.onMounted((function(){"get"===t.method&&f()})),{isLoading:o,isSuccess:c,isError:u,data:a,error:s,execute:f}}(a?"".concat(o,"?").concat(P):o,S,j),A=k.isLoading,x=k.isSuccess,E=k.isError,I=k.data,V=k.error,L=k.execute;r.computed((function(){return i||o.toString().replace(/\//g,"-")}));return r.watch([I,V],(function(e){var r=u(e,2),t=r[0],n=r[1];t&&w("fetch-success"),n&&w("fetch-error")})),r.watch((function(){return S}),L),{isLoading:A,isSuccess:x,isError:E,data:I,error:V,execute:L}}};s.render=function(e,t,n,i,o,c){return r.openBlock(),r.createBlock("div",{id:n.fetchId,class:["vue-fetch",{"is-stubbed":!!n.stub}]},[r.renderSlot(e.$slots,"default",{isLoading:i.isLoading,isSuccess:i.isSuccess,isError:i.isError,data:i.data,error:i.error})],10,["id"])};var l=Object.freeze({__proto__:null,Vue3Fetch:s}),f=function(e){f.installed||(f.installed=!0,Object.entries(l).forEach((function(r){var t=u(r,2),n=t[0],i=t[1];e.component(n,i)})))},d={install:f},p=null;return"undefined"!=typeof window?p=window.Vue:"undefined"!=typeof global&&(p=global.Vue),p&&p.use(d),e.Vue3Fetch=s,e.default=d,e}({},Vue);